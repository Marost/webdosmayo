/*
 * AllInOne Banner - Banner With Thumbnails v3.1
 *
 * Copyright 2012, LambertGroup
 * 
*/


(function(c){function K(a,b){c(a.currentImg.attr("data-text-id")).css("display","block");var h=c(a.currentImg.attr("data-text-id")).children(),e=0;currentText_arr=[];h.each(function(){currentText_arr[e]=c(this);var f=currentText_arr[e].attr("data-initial-left"),h=currentText_arr[e].attr("data-initial-top");b.responsive&&(f=parseInt(f/(b.origWidth/b.width),10),h=parseInt(h/(b.origWidth/b.width),10));currentText_arr[e].css({left:f+"px",top:h+"px",opacity:parseInt(currentText_arr[e].attr("data-fade-start"), 10)/100});var k=currentText_arr[e];setTimeout(function(){b.responsive&&(newCss="",-1!=k.css("font-size").lastIndexOf("px")?(fontSize=k.css("font-size").substr(0,k.css("font-size").lastIndexOf("px")),newCss+="font-size:"+fontSize/(b.origWidth/b.width)+"px;"):-1!=k.css("font-size").lastIndexOf("em")&&(fontSize=k.css("font-size").substr(0,k.css("font-size").lastIndexOf("em")),newCss+="font-size:"+fontSize/(b.origWidth/b.width)+"em;"),-1!=k.css("line-height").lastIndexOf("px")?(lineHeight=k.css("line-height").substr(0, k.css("line-height").lastIndexOf("px")),newCss+="line-height:"+lineHeight/(b.origWidth/b.width)+"px;"):-1!=k.css("line-height").lastIndexOf("em")&&(lineHeight=k.css("line-height").substr(0,k.css("line-height").lastIndexOf("em")),newCss+="line-height:"+lineHeight/(b.origWidth/b.width)+"em;"),k.wrapInner('<div class="newFS" style="'+newCss+'" />'));var f=k.attr("data-final-left"),h=k.attr("data-final-top");b.responsive&&(f=parseInt(f/(b.origWidth/b.width),10),h=parseInt(h/(b.origWidth/b.width),10)); var g=1;!0==a.isVideoPlaying&&(g=0);k.animate({opacity:g,left:f+"px",top:h+"px"},1E3*k.attr("data-duration"),function(){!0==a.isVideoPlaying&&c(a.currentImg.attr("data-text-id")).children().css("opacity",0)})},1E3*currentText_arr[e].attr("data-delay"));e++})}function L(a,b){nowx=(new Date).getTime();!a.mouseOverBanner&&(!a.effectIsRunning&&b.showCircleTimer)&&(a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.ctx.beginPath(),a.ctx.globalAlpha=b.behindCircleAlpha/100,a.ctx.arc(b.circleRadius+2* b.circleLineWidth,b.circleRadius+2*b.circleLineWidth,b.circleRadius,0,2*Math.PI,!1),a.ctx.lineWidth=b.circleLineWidth+2,a.ctx.strokeStyle=b.behindCircleColor,a.ctx.stroke(),a.ctx.beginPath(),a.ctx.globalAlpha=b.circleAlpha/100,a.ctx.arc(b.circleRadius+2*b.circleLineWidth,b.circleRadius+2*b.circleLineWidth,b.circleRadius,0,2*((a.timeElapsed+nowx-a.arcInitialTime)/1E3)/b.autoPlay*Math.PI,!1),a.ctx.lineWidth=b.circleLineWidth,a.ctx.strokeStyle=b.circleColor,a.ctx.stroke())}function M(a,b,h){c(".stripe", a).remove();c(".block",a).remove();F=A=Math.round(b.width/b.numberOfStripes);for(var e=!0,f=0;f<b.numberOfStripes;f++)f==b.numberOfStripes-1&&(F=a.width()-A*(b.numberOfStripes-1)),!b.responsive||!c.browser.msie||c.browser.msie&&9<=c.browser.version?-1!=y.indexOf("ipad")||-1!=y.indexOf("iphone")||-1!=y.indexOf("ipod")||-1!=y.indexOf("webos")?e=!1:a.append(c('<div class="stripe"></div>').css({opacity:"0",left:A*f+"px",width:F+"px",height:"0px",background:'url("'+h.current_imgInside.attr("src")+'") '+ -1*f*A+"px 0%"})):e=!1,e||(mleft=-1*A*f,a.append(c('<div class="stripe"><img src="'+h.current_imgInside.attr("src")+'" width="'+b.width+'" height="'+b.height+'" style="margin-left:'+mleft+'px;"></div>').css({opacity:"0",left:A*f+"px",width:F+"px",height:"0px"})));b.responsive&&e&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version)&&c(".stripe",a).css({"-webkit-background-size":b.width+"px "+b.height+"px","-moz-background-size":b.width+"px "+b.height+"px","-o-background-size":b.width+"px "+b.height+ "px","-ms-background-size":b.width+"px "+b.height+"px","background-size":b.width+"px "+b.height+"px"})}function J(a,b,c,e,f){var w=a.width(),k=a.height();a.css({width:"0"});a.css({height:"0"});b==e.numberOfRows-1&&c==e.numberOfColumns-1?setTimeout(function(){a.animate({opacity:"1.0",width:w,height:k},1E3*e.effectDuration/3,"",function(){f.trigger("effectComplete")})},t):setTimeout(function(){a.animate({opacity:"1.0",width:w,height:k},1E3*e.effectDuration/3)},t);t+=H}function G(a,b,c,e,f,w,k,n){C= b.css("left").substr(0,b.css("left").lastIndexOf("px"));1===a||-1===a?(n.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:"+="+a*n.carouselStep},500,"easeOutCubic",function(){N(n,b,c,e,f,w,k);n.isCarouselScrolling=!1})):C!=-1*Math.floor(n.current_img_no/f.numberOfThumbsPerScreen)*n.carouselStep&&(n.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:-1*Math.floor(n.current_img_no/f.numberOfThumbsPerScreen)*n.carouselStep},500,"easeOutCubic",function(){N(n, b,c,e,f,w,k);n.isCarouselScrolling=!1}))}function N(a,b,c,e,f,w,k){C=b.css("left").substr(0,b.css("left").lastIndexOf("px"));0>C?c.hasClass("carouselLeftNavDisabled")&&c.removeClass("carouselLeftNavDisabled"):c.addClass("carouselLeftNavDisabled");Math.abs(C-a.carouselStep)<(k.width()+a.thumbMarginLeft)*w?e.hasClass("carouselRightNavDisabled")&&e.removeClass("carouselRightNavDisabled"):e.addClass("carouselRightNavDisabled")}function D(a,b,h,e,f,w,k,n,v,g,m,r){var s=!0;if(!g.loop&&b.current_img_no+ a>=m||!g.loop&&0>b.current_img_no+a)s=!1;if(s){c(".newFS",e).contents().unwrap();b.arcInitialTime=(new Date).getTime();b.timeElapsed=0;g.showCircleTimer&&(b.ctx.clearRect(0,0,b.canvas.width,b.canvas.height),b.ctx.beginPath(),b.ctx.globalAlpha=g.behindCircleAlpha/100,b.ctx.arc(g.circleRadius+2*g.circleLineWidth,g.circleRadius+2*g.circleLineWidth,g.circleRadius,0,2*Math.PI,!1),b.ctx.lineWidth=g.circleLineWidth+2,b.ctx.strokeStyle=g.behindCircleColor,b.ctx.stroke(),b.ctx.beginPath(),b.ctx.globalAlpha= g.circleAlpha/100,b.ctx.arc(g.circleRadius+2*g.circleLineWidth,g.circleRadius+2*g.circleLineWidth,g.circleRadius,0,0,!1),b.ctx.lineWidth=g.circleLineWidth,b.ctx.strokeStyle=g.circleColor,b.ctx.stroke());c(b.currentImg.attr("data-text-id")).css("display","none");c(f[b.current_img_no]).removeClass("thumbsHolder_ThumbON");g.randomizeImages&&!b.bottomNavClicked?(a=Math.floor(Math.random()*m),b.current_img_no=b.current_img_no===a?Math.floor(Math.random()*m):a):b.current_img_no=b.current_img_no+a>=m?0: 0>b.current_img_no+a?m-1:b.current_img_no+a;b.bottomNavClicked=!1;c(f[b.current_img_no]).addClass("thumbsHolder_ThumbON");C=k.css("left").substr(0,k.css("left").lastIndexOf("px"));0===b.current_img_no||b.current_img_no===m-1?G(0,k,n,v,g,m,r,b):G(1001,k,n,v,g,m,r,b);b.currentImg=c(w[b.current_img_no]);b.current_imgInside=b.currentImg.find("img:first");b.currentImg.attr("data-transition")?(h=b.currentImg.attr("data-transition"),"random"==h&&(h=I[Math.floor(Math.random()*I.length)])):h="random"!=g.defaultEffect? g.defaultEffect:I[Math.floor(Math.random()*I.length)];b.effectIsRunning=!0;if("fade"==h||"slideFromLeft"==h||"slideFromRight"==h||"slideFromTop"==h||"slideFromBottom"==h)M(e,g,b),f=c(".stripe:first",e),"fade"==h&&(f.css({top:"0px",height:"100%",width:e.width()+"px"}),f.animate({opacity:"1.0"},2E3*g.effectDuration,"",function(){e.trigger("effectComplete")})),"slideFromLeft"==h&&(f.css({top:"0px",height:"100%",width:"0"}),f.animate({opacity:"1.0",width:e.width()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")})), "slideFromRight"==h&&(f.css({top:"0px",height:"100%",width:"0",left:e.width()+5+"px"}),f.animate({opacity:"1.0",left:"0",width:e.width()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")})),"slideFromTop"==h&&(f.css({top:"0px",height:"0",width:e.width()+"px"}),f.animate({opacity:"1.0",height:e.height()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")})),"slideFromBottom"==h&&(f.css({top:"0px",height:"0",width:e.width()+"px",top:e.height()+"px"}),f.animate({opacity:"1.0", top:0,height:e.height()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")}));0<=h.indexOf("Stripes")&&(M(e,g,b),f=0<=h.indexOf("Reverse")?c(".stripe",e).myReverse():c(".stripe",e),t=100,i=0,f.each(function(){var a=c(this);("topBottomDroppingStripes"==h||"topBottomDroppingReverseStripes"==h)&&a.css({top:"0px"});("bottomTopDroppingStripes"==h||"bottomTopDroppingReverseStripes"==h)&&a.css({bottom:"0px"});("leftRightFadingStripes"==h||"leftRightFadingReverseStripes"==h)&&a.css({top:"0px", height:"100%",width:"0"});"asynchronousDroppingStripes"==h&&(i%2?a.css({top:"0px"}):a.css({bottom:"0px"}));if("leftRightFadingStripes"==h||"leftRightFadingReverseStripes"==h){var b=A;if("leftRightFadingStripes"==h&&i==g.numberOfStripes-1||"leftRightFadingReverseStripes"==h&&0==i)b=F;i==g.numberOfStripes-1?setTimeout(function(){a.animate({width:b+"px",opacity:"1.0"},800*g.effectDuration,"",function(){e.trigger("effectComplete")})},t):setTimeout(function(){a.animate({width:b+"px",opacity:"1.0"},800* g.effectDuration)},t)}else i==g.numberOfStripes-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")})},t):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},1E3*g.effectDuration)},t);t+=P;i++}));if(0<=h.indexOf("Blocks")){c(".stripe",e).remove();c(".block",e).remove();f=Math.round(g.width/g.numberOfColumns);w=Math.round(g.height/g.numberOfRows);k=f;n=w;m=v=0;r=!0;for(a=0;a<g.numberOfRows;a++)for(s=0;s<g.numberOfColumns;s++)v= f*s,m=w*a,k=s==g.numberOfColumns-1?g.width-f*(g.numberOfColumns-1):f,n=a==g.numberOfRows-1?g.height-w*(g.numberOfRows-1):w,!g.responsive||!c.browser.msie||c.browser.msie&&9<=c.browser.version?-1!=y.indexOf("ipad")||-1!=y.indexOf("iphone")||-1!=y.indexOf("ipod")||-1!=y.indexOf("webos")?r=!1:e.append(c('<div class="block"></div>').css({opacity:"0",left:v+"px",top:m+"px",width:k+"px",height:n+"px",background:'url("'+b.current_imgInside.attr("src")+'") -'+v+"px -"+m+"px"})):r=!1,r||(mleft=-1*v,mtop=-1* m,e.append(c('<div class="block"><img src="'+b.current_imgInside.attr("src")+'" width="'+g.width+'" height="'+g.height+'" style="margin-left:'+mleft+"px; margin-top:"+mtop+'px;"></div>').css({opacity:"0",left:v+"px",top:m+"px",width:k+"px",height:n+"px"})));g.responsive&&r&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version)&&c(".block",e).css({"-webkit-background-size":g.width+"px "+g.height+"px","-moz-background-size":g.width+"px "+g.height+"px","-o-background-size":g.width+"px "+g.height+"px", "-ms-background-size":g.width+"px "+g.height+"px","background-size":g.width+"px "+g.height+"px"});if(0<=h.indexOf("Reverse"))var x=c(".block",e).myReverse();else if("randomBlocks"==h){for(var b=c(".block",e),u,f=b.length;f;x=parseInt(Math.random()*f,10),u=b[--f],b[f]=b[x],b[x]=u);x=b}else x=c(".block",e);t=100;if("randomBlocks"==h){i=0;var d=g.numberOfRows*g.numberOfColumns;x.each(function(){var a=c(this),b=a.width(),f=a.height();a.css({width:"0"});a.css({height:"0"});i==d-1?setTimeout(function(){a.animate({opacity:"1.0", width:b,height:f},1E3*g.effectDuration/3,"",function(){e.trigger("effectComplete")})},t):setTimeout(function(){a.animate({opacity:"1.0",width:b,height:f},1E3*g.effectDuration/3)},t);t+=H;i++})}else{var p=0,l=0,E=[];E[p]=[];x.each(function(){E[p][l]=c(this);l++;l==g.numberOfColumns&&(p++,l=0,E[p]=[])});l=p=0;t=100;x=c(E[p][l]);for(J(x,0,0,g,e);p<g.numberOfRows-1||l<g.numberOfColumns-1;){p<g.numberOfRows-1&&p++;l<g.numberOfColumns-1&&l++;i=p;l<p&&g.numberOfRows>g.numberOfColumns&&(i=p-l);j=0;for(p< l&&g.numberOfRows<g.numberOfColumns&&(j=l-p);0<=i&&j<=l;)x=c(E[i--][j++]),J(x,i,j,g,e)}t=g.numberOfRows<g.numberOfColumns?t-(g.numberOfRows-1)*H:t-(g.numberOfColumns-1)*H;limit_i=0;for(limit_j=l-p;limit_i<p&&limit_j<l;){i=p+1;for(j=limit_j;i>limit_i&&j<l;)i-=1,j+=1,x=c(E[i][j]),J(x,i,j,g,e);limit_i++;limit_j++}}}}}function O(a,b,h,e,f,w,k,n,v,g,m){"opportune"!=b.skin&&(m.css({top:b.height+"px","margin-top":parseInt(b.thumbsWrapperMarginTop/(b.origWidth/b.width),10)+"px",height:parseInt(b.origthumbsHolderWrapperH/ (b.origWidth/b.width),10)+"px"}),bgTopCorrection=0,1==b.origWidth/b.width&&0<b.thumbsReflection&&(bgTopCorrection=-7),k.css("background-position","0px "+((m.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),n.css("background-position","0px "+((m.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),g.css("width",b.width-k.width()-n.width()),b.origWidthThumbsHolderVisibleWrapper=b.origWidth-k.width()-n.width(),f.css({width:parseInt(b.origThumbW/(b.origWidthThumbsHolderVisibleWrapper/ g.width()),10)+"px",height:parseInt(b.origThumbH/(b.origWidthThumbsHolderVisibleWrapper/g.width()),10)+"px"}),b.numberOfThumbsPerScreen>=h&&g.css("left",parseInt((m.width()-(v.width()+a.thumbMarginLeft)*h)/2,10)+parseInt(a.thumbMarginLeft/2,10)+"px"),h=c(".thumbsHolder_ThumbOFF",e).find("img:first"),0<b.thumbsReflection&&h.unreflect(),h.css({width:f.width()+"px",height:f.height()+"px","margin-top":parseInt((m.height()-f.height())/2,10)+bgTopCorrection+"px"}),1==b.origWidth/b.width&&0<b.thumbsReflection&& h.reflect({opacity:b.thumbsReflection/100}),a.thumbMarginLeft=Math.floor((m.width()-k.width()-n.width()-v.width()*b.numberOfThumbsPerScreen)/(b.numberOfThumbsPerScreen-1)),thumb_i=-1,w.children().each(function(){thumb_i++;theThumb=c(this);theThumb.css("background-position","center "+b.thumbsOnMarginTop/(b.origWidth/b.width)+"px");0>=thumb_i?theThumb.css("margin-left",Math.floor((m.width()-k.width()-n.width()-(a.thumbMarginLeft+theThumb.width())*(b.numberOfThumbsPerScreen-1)-theThumb.width())/2)+"px"): theThumb.css("margin-left",a.thumbMarginLeft+"px")}),a.carouselStep=(v.width()+a.thumbMarginLeft)*b.numberOfThumbsPerScreen)}var I="fade slideFromLeft slideFromRight slideFromTop slideFromBottom topBottomDroppingStripes topBottomDroppingReverseStripes bottomTopDroppingStripes bottomTopDroppingReverseStripes asynchronousDroppingStripes leftRightFadingStripes leftRightFadingReverseStripes topBottomDiagonalBlocks topBottomDiagonalReverseBlocks randomBlocks".split(" "),A,F,t=100,P=50,H=25,B=!1,C=0,y= navigator.userAgent.toLowerCase();c.fn.allinone_thumbnailsBanner=function(a){a=c.extend({},c.fn.allinone_thumbnailsBanner.defaults,a);return this.each(function(){var b=c(this);responsiveWidth=b.parent().width();responsiveHeight=b.parent().height();a.responsiveRelativeToBrowser&&(responsiveWidth=c(window).width(),responsiveHeight=c(window).height());a.origWidth=a.width;a.width100Proc&&(a.width=responsiveWidth);a.origHeight=a.height;a.height100Proc&&(a.height=responsiveHeight);if(a.responsive&&(a.origWidth!= responsiveWidth||a.width100Proc))a.width=a.origWidth>responsiveWidth||a.width100Proc?responsiveWidth:a.origWidth,a.height100Proc||(a.height=a.width/(a.origWidth/a.origHeight));a.width=parseInt(a.width,10);a.height=parseInt(a.height,10);a.enableTouchScreen&&a.responsive&&(a.width-=1);b.css("display","block");var h=c("<div></div>").addClass("allinone_thumbnailsBanner").addClass(a.skin),e=c('<div class="bannerControls"> <div class="leftNav"></div> <div class="rightNav"></div> </div> <div class="contentHolderVisibleWrapper"><div class="contentHolder"></div></div> <div class="thumbsHolderWrapper"><div class="thumbsHolderVisibleWrapper"><div class="thumbsHolder"></div></div></div> <canvas class="mycanvas"></canvas>'); b.wrap(h);b.after(e);a.showAllControllers||w.css("display","none");var f=b.parent(".allinone_thumbnailsBanner"),w=c(".bannerControls",f),k=c(".leftNav",f),n=c(".rightNav",f);k.css("display","none");n.css("display","none");a.showNavArrows&&a.showOnInitNavArrows&&(k.css("display","block"),n.css("display","block"));var v=c(".thumbsHolderWrapper",f),g=c(".thumbsHolderVisibleWrapper",f),m=c(".thumbsHolder",f),r,s;r=c('<div class="carouselLeftNav"></div>');s=c('<div class="carouselRightNav"></div>');v.append(r); v.append(s);s.css("right","0");m.css("width",r.width()+"px");(!a.showThumbs||!a.showOnInitThumbs)&&v.css("display","none");var x=a.defaultEffect,u=0,d={current_img_no:0,currentImg:0,current_imgInside:"",windowWidth:0,carouselStep:0,thumbMarginLeft:0,bottomNavClicked:!1,effectIsRunning:!1,mouseOverBanner:!1,timeoutID:"",intervalID:"",arcInitialTime:(new Date).getTime(),timeElapsed:0,windowWidth:0,canvas:"",ctx:"",bannerRatio:a.origWidth/a.origHeight};d.canvas=c(".mycanvas",f)[0];d.canvas.width=2*a.circleRadius+ 4*a.circleLineWidth;d.canvas.height=2*a.circleRadius+4*a.circleLineWidth;c.browser.msie&&9>parseInt(c.browser.version,10)&&(a.showCircleTimer=!1);a.showCircleTimer&&(d.ctx=d.canvas.getContext("2d"));f.width(a.width);f.height(a.height);w.css("margin-top",parseInt((a.height-k.height())/2,10)+"px");var p=b.find("ul:first").children(),l,t=0;p.each(function(){d.currentImg=c(this);d.currentImg.is("li")||(d.currentImg=d.currentImg.find("li:first"));if(d.currentImg.is("li")){d.currentImg.css("display","none"); u++;var b=c(p[u-1]).attr("data-bottom-thumb");l=c('<div class="thumbsHolder_ThumbOFF" rel="'+(u-1)+'"><img src="'+b+'"></div>');m.append(l);0==a.origThumbW&&(0==a.numberOfThumbsPerScreen&&(a.numberOfThumbsPerScreen=Math.floor((a.origWidth-r.width()-s.width())/l.width())),a.origThumbW=l.width(),a.origThumbH=l.height(),a.origthumbsHolderWrapperH=v.height(),d.thumbMarginLeft=Math.floor((a.origWidth-r.width()-s.width()-l.width()*a.numberOfThumbsPerScreen)/(a.numberOfThumbsPerScreen-1)));m.css("width", m.width()+d.thumbMarginLeft+l.width()+"px");1>=u?l.css("margin-left",Math.floor((v.width()-r.width()-s.width()-(d.thumbMarginLeft+l.width())*(a.numberOfThumbsPerScreen-1)-l.width())/2)+"px"):l.css("margin-left",d.thumbMarginLeft+"px");t=parseInt((v.height()-parseInt(l.css("height").substring(0,l.css("height").length-2)))/2,10)}});g.css("width",g.width()-r.width()-s.width());g.css("left",r.width());d.carouselStep=(l.width()+d.thumbMarginLeft)*a.numberOfThumbsPerScreen;0===Math.floor(d.current_img_no/ a.numberOfThumbsPerScreen)&&r.addClass("carouselLeftNavDisabled");Math.floor(d.current_img_no/a.numberOfThumbsPerScreen)==Math.floor(u/a.numberOfThumbsPerScreen)&&s.addClass("carouselRightNavDisabled");0<a.thumbsReflection&&(t-=7);h=c(".thumbsHolder_ThumbOFF",f).find("img:first");h.css("margin-top",t+"px");g.css({width:a.origWidth-r.width()-s.width(),left:r.width()+"px"});d.carouselStep=(l.width()+d.thumbMarginLeft)*a.numberOfThumbsPerScreen;r.addClass("carouselLeftNavDisabled");a.numberOfThumbsPerScreen>= u&&(s.addClass("carouselRightNavDisabled"),r.css("display","none"),s.css("display","none"),g.css("left",parseInt((v.width()-(l.width()+d.thumbMarginLeft)*u)/2,10)+"px"));v.css("top",a.height+"px");h=c(".thumbsHolder_ThumbOFF",f).find("img:first");h.css("margin-top",t+"px");a.origthumbsHolder_MarginTop=t;var z=c(".thumbsHolder_ThumbOFF",f);O(d,a,u,f,z,m,r,s,l,g,v);d.current_img_no=a.firstImg;a.firstImg>u&&(d.current_img_no=u);0>a.firstImg&&(d.current_img_no=0);a.randomizeImages&&(d.current_img_no= Math.floor(Math.random()*u));if(d.current_img_no>=a.numberOfThumbsPerScreen)for(q=0;q<Math.floor(d.current_img_no/a.numberOfThumbsPerScreen);q++)G(-1,m,r,s,a,u,l,d);d.currentImg=c(p[d.current_img_no]);d.current_imgInside=d.currentImg.find("img:first");-1!=y.indexOf("ipad")||-1!=y.indexOf("iphone")||-1!=y.indexOf("ipod")||-1!=y.indexOf("webos")||c.browser.msie&&7>=c.browser.version?f.append('<img id="curBgImgIos" src="'+d.current_imgInside.attr("src")+'" width="'+a.width+'" height="'+a.height+'">'): (f.css("background",'url("'+d.current_imgInside.attr("src")+'") no-repeat'),a.responsive&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version?f.css({"-webkit-background-size":a.width+"px "+a.height+"px","-moz-background-size":a.width+"px "+a.height+"px","-o-background-size":a.width+"px "+a.height+"px","-ms-background-size":a.width+"px "+a.height+"px","background-size":a.width+"px "+a.height+"px"}):8==c.browser.version&&f.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d.current_imgInside.attr("src")+ "',sizingMethod='scale')"})));a.enableTouchScreen&&(h=Math.floor(1E5*Math.random()),f.wrap('<div id="bannerWithThumbnailsParent_'+h+'" style="position:relative;" />'),c("#bannerWithThumbnailsParent_"+h).width(a.width+1),c("#bannerWithThumbnailsParent_"+h).height(a.height),f.css({cursor:"url("+a.absUrl+"skins/hand.cur),url("+a.absUrl+"skins/hand.cur),move",left:"0px",position:"absolute"}),rightVal=parseInt(n.css("right").substring(0,n.css("right").length-2),10),f.mousedown(function(){rightVal=parseInt(n.css("right").substring(0, n.css("right").length-2),10);0>rightVal&&!B&&(n.css("visibility","hidden"),k.css("visibility","hidden"),n.css("right","0"))}),f.mouseup(function(){B=!1;0>rightVal&&(n.css("right",rightVal+"px"),n.css("visibility","visible"),k.css("visibility","visible"))}),f.draggable({axis:"x",containment:"parent",start:function(){origLeft=c(this).css("left")},stop:function(){d.effectIsRunning||(finalLeft=c(this).css("left"),direction=1,origLeft<finalLeft&&(direction=-1),D(direction,d,x,f,z,p,m,r,s,a,u,l));0>rightVal&& (n.css("right",rightVal+"px"),n.css("visibility","visible"),k.css("visibility","visible"));c(this).css("left","0px")}}));K(d,a,b,w);f.bind("effectComplete",function(){d.effectIsRunning=!1;-1!=y.indexOf("ipad")||-1!=y.indexOf("iphone")||-1!=y.indexOf("ipod")||-1!=y.indexOf("webos")||c.browser.msie&&7>=c.browser.version?(c("#curBgImgIos",f).attr("src",d.current_imgInside.attr("src")),c("#curBgImgIos",f).width(a.width),c("#curBgImgIos",f).height(a.height)):(f.css("background",'url("'+d.current_imgInside.attr("src")+ '") no-repeat'),a.responsive&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version?f.css({"-webkit-background-size":a.width+"px "+a.height+"px","-moz-background-size":a.width+"px "+a.height+"px","-o-background-size":a.width+"px "+a.height+"px","-ms-background-size":a.width+"px "+a.height+"px","background-size":a.width+"px "+a.height+"px"}):8==c.browser.version&&f.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d.current_imgInside.attr("src")+"',sizingMethod='scale')"}))); d.arcInitialTime=(new Date).getTime();d.timeElapsed=0;a.showCircleTimer&&(clearInterval(d.intervalID),d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height),d.ctx.beginPath(),d.ctx.globalAlpha=a.behindCircleAlpha/100,d.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,2*Math.PI,!1),d.ctx.lineWidth=a.circleLineWidth+2,d.ctx.strokeStyle=a.behindCircleColor,d.ctx.stroke(),d.ctx.beginPath(),d.ctx.globalAlpha=a.circleAlpha/100,d.ctx.arc(a.circleRadius+2*a.circleLineWidth, a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,0,!1),d.ctx.lineWidth=a.circleLineWidth,d.ctx.strokeStyle=a.circleColor,d.ctx.stroke(),d.intervalID=setInterval(function(){L(d,a)},125));K(d,a,b,w);0<a.autoPlay&&(1<u&&!d.mouseOverBanner)&&(clearTimeout(d.timeoutID),d.timeoutID=setTimeout(function(){D(1,d,x,f,z,p,m,r,s,a,u,l)},1E3*a.autoPlay))});f.mouseenter(function(){d.mouseOverBanner=!0;clearTimeout(d.timeoutID);nowx=(new Date).getTime();d.timeElapsed+=nowx-d.arcInitialTime;a.autoHideNavArrows&& a.showNavArrows&&(k.css("display","block"),n.css("display","block"));a.autoHideThumbs&&a.showThumbs&&v.css("display","block")});f.mouseleave(function(){d.mouseOverBanner=!1;nowx=(new Date).getTime();a.autoHideNavArrows&&a.showNavArrows&&(k.css("display","none"),n.css("display","none"));a.autoHideThumbs&&a.showThumbs&&v.css("display","none");if(0<a.autoPlay&&1<u){clearTimeout(d.timeoutID);d.arcInitialTime=(new Date).getTime();var b=parseInt(1E3*a.autoPlay-(d.timeElapsed+nowx-d.arcInitialTime),10); d.timeoutID=setTimeout(function(){D(1,d,x,f,z,p,m,r,s,a,u,l)},b)}});f.click(function(){if(void 0!=c(p[d.current_img_no]).attr("data-link")&&""!=c(p[d.current_img_no]).attr("data-link")&&!d.effectIsRunning&&!B){var b=a.target;void 0!=c(p[d.current_img_no]).attr("data-target")&&""!=c(p[d.current_img_no]).attr("data-target")&&(b=c(p[d.current_img_no]).attr("data-target"));"_blank"==b?window.open(c(p[d.current_img_no]).attr("data-link")):window.location=c(p[d.current_img_no]).attr("data-link")}});k.mousedown(function(){B= !0;d.effectIsRunning||(clearTimeout(d.timeoutID),D(-1,d,x,f,z,p,m,r,s,a,u,l))});k.mouseup(function(){B=!1});n.mousedown(function(){B=!0;d.effectIsRunning||(clearTimeout(d.timeoutID),D(1,d,x,f,z,p,m,r,s,a,u,l))});n.mouseup(function(){B=!1});var A=!1;c(window).resize(function(){doResizeNow=!0;-1!=navigator.userAgent.indexOf("Android")&&(0==a.windowOrientationScreenSize0&&0==window.orientation&&(a.windowOrientationScreenSize0=c(window).width()),0==a.windowOrientationScreenSize90&&90==window.orientation&& (a.windowOrientationScreenSize90=c(window).height()),0==a.windowOrientationScreenSize_90&&-90==window.orientation&&(a.windowOrientationScreenSize_90=c(window).height()),a.windowOrientationScreenSize0&&(0==window.orientation&&c(window).width()>a.windowOrientationScreenSize0)&&(doResizeNow=!1),a.windowOrientationScreenSize90&&(90==window.orientation&&c(window).height()>a.windowOrientationScreenSize90)&&(doResizeNow=!1),a.windowOrientationScreenSize_90&&(-90==window.orientation&&c(window).height()>a.windowOrientationScreenSize_90)&& (doResizeNow=!1),0==d.windowWidth&&(doResizeNow=!1,d.windowWidth=c(window).width()));c.browser.msie&&(9==parseInt(c.browser.version,10)&&0==d.windowWidth)&&(doResizeNow=!1);d.windowWidth==c(window).width()?(doResizeNow=!1,a.windowCurOrientation!=window.orientation&&-1!=navigator.userAgent.indexOf("Android")&&(a.windowCurOrientation=window.orientation,doResizeNow=!0)):d.windowWidth=c(window).width();a.responsive&&doResizeNow&&(!1!==A&&clearTimeout(A),A=setTimeout(function(){var e=a,h=u,n=w,t=z,A=l, B=c("body").css("overflow");c("body").css("overflow","hidden");e.enableTouchScreen?(responsiveWidth=b.parent().parent().parent().width(),responsiveHeight=b.parent().parent().parent().height()):(responsiveWidth=b.parent().parent().width(),responsiveHeight=b.parent().parent().height());e.responsiveRelativeToBrowser&&(responsiveWidth=c(window).width(),responsiveHeight=c(window).height());e.width100Proc&&(e.width=responsiveWidth);e.height100Proc&&(e.height=responsiveHeight);if(e.origWidth!=responsiveWidth|| e.width100Proc){e.origWidth>responsiveWidth||e.width100Proc?e.width=responsiveWidth:e.width100Proc||(e.width=e.origWidth);e.height100Proc||(e.height=e.width/d.bannerRatio);e.width=parseInt(e.width,10);e.height=parseInt(e.height,10);e.enableTouchScreen&&e.responsive&&(e.width-=1);f.width(e.width);f.height(e.height);-1!=y.indexOf("ipad")||-1!=y.indexOf("iphone")||-1!=y.indexOf("ipod")||-1!=y.indexOf("webos")||c.browser.msie&&7>=c.browser.version?(c("#curBgImgIos",f).attr("src",d.current_imgInside.attr("src")), c("#curBgImgIos",f).width(e.width),c("#curBgImgIos",f).height(e.height)):!c.browser.msie||c.browser.msie&&9<=c.browser.version?f.css({"-webkit-background-size":e.width+"px "+e.height+"px","-moz-background-size":e.width+"px "+e.height+"px","-o-background-size":e.width+"px "+e.height+"px","-ms-background-size":e.width+"px "+e.height+"px","background-size":e.width+"px "+e.height+"px"}):8==c.browser.version&&f.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d.current_imgInside.attr("src")+ "',sizingMethod='scale')"});e.enableTouchScreen&&(f.parent().width(e.width+1),f.parent().height(e.height));n.css("margin-top",parseInt((e.height-k.height())/2,10)+"px");for(i=0;i<h;i++)c(c(p[i]).attr("data-text-id")).css("width",b.width()+"px");O(d,e,h,f,t,m,r,s,A,g,v);clearTimeout(d.timeoutID);D(1,d,x,f,t,p,m,r,s,e,h,A)}c("body").css("overflow",B)},300))});z=c(".thumbsHolder_ThumbOFF",f);z.mousedown(function(){B=!0;if(!d.effectIsRunning){var b=c(this).attr("rel");c(z[d.current_img_no]).removeClass("thumbsHolder_ThumbON"); d.bottomNavClicked=!0;d.current_img_no=b-1;D(1,d,x,f,z,p,m,r,s,a,u,l)}});z.mouseup(function(){B=!1});z.mouseenter(function(){var a=c(this);a.attr("rel");a.addClass("thumbsHolder_ThumbON")});z.mouseleave(function(){var a=c(this),b=a.attr("rel");d.current_img_no!=b&&a.removeClass("thumbsHolder_ThumbON")});r.click(function(){B=!0;d.isCarouselScrolling||(C=m.css("left").substr(0,m.css("left").lastIndexOf("px")),0>C&&G(1,m,r,s,a,u,l,d))});s.click(function(){B=!0;d.isCarouselScrolling||(C=m.css("left").substr(0, m.css("left").lastIndexOf("px")),Math.abs(C-d.carouselStep)<(l.width()+d.thumbMarginLeft)*u&&G(-1,m,r,s,a,u,l,d))});c(z[d.current_img_no]).addClass("thumbsHolder_ThumbON");0<a.autoPlay&&1<u&&(a.showCircleTimer&&(d.intervalID=setInterval(function(){L(d,a)},125)),d.timeoutID=setTimeout(function(){D(1,d,x,f,z,p,m,r,s,a,u,l)},1E3*a.autoPlay))})};c.fn.myReverse=[].reverse;c.fn.allinone_thumbnailsBanner.defaults={skin:"cool",width:960,height:384,width100Proc:!1,height100Proc:!1,randomizeImages:!1,firstImg:0, numberOfStripes:20,numberOfRows:5,numberOfColumns:10,defaultEffect:"random",effectDuration:0.5,autoPlay:4,loop:!0,target:"_blank",showAllControllers:!0,showNavArrows:!0,showOnInitNavArrows:!0,autoHideNavArrows:!0,showThumbs:!0,showOnInitThumbs:!0,autoHideThumbs:!1,thumbsReflection:50,enableTouchScreen:!0,absUrl:"",showCircleTimer:!0,showCircleTimerIE8IE7:!1,circleRadius:10,circleLineWidth:4,circleColor:"#FF0000",circleAlpha:100,behindCircleColor:"#000000",behindCircleAlpha:50,responsive:!1,responsiveRelativeToBrowser:!0, numberOfThumbsPerScreen:0,thumbsOnMarginTop:0,thumbsWrapperMarginTop:0,origWidth:0,origHeight:0,origThumbW:0,origThumbH:0,origthumbsHolderWrapperH:121,origthumbsHolder_MarginTop:0,windowOrientationScreenSize0:0,windowOrientationScreenSize90:0,windowOrientationScreenSize_90:0,windowCurOrientation:0}})(jQuery);